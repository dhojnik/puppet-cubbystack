---
## OpenStack

# RabbitMQ
rabbit_user:     'nova'
rabbit_password: 'password'

# Hosts and Regions
cloud_controller: '192.168.1.1'
openstack_region: 'RegionOne'

# UIDs and GIDs
openstack_users:
  nova:
    uid: 999
    gid: 999
  glance:
    uid: 998
    gid: 998
  keystone:
    uid: 997
    gid: 997
  cinder:
    uid: 996
    gid: 996
  swift:
    uid: 995
    gid: 995
  neutron:
    uid: 994
    gid: 994

### OpenStack conf settings

# Nova settings
nova_settings:
  conf:
    'DEFAULT/verbose':                              true
    'DEFAULT/debug':                                true
    'DEFAULT/use_syslog':                           true
    'DEFAULT/syslog_log_facility':                  'LOG_LOCAL0'
    'DEFAULT/log_dir':                              '/var/log/nova'
    'DEFAULT/state_path':                           '/var/lib/nova'
    'DEFAULT/lock_path':                            '/var/lock/nova'
    'DEFAULT/auth_strategy':                        'keystone'
    'DEFAULT/rootwrap_config':                      '/etc/nova/rootwrap.conf'
    'DEFAULT/glance_api_servers':                   "%{hiera('cloud_controller')}:9292"
    'DEFAULT/api_paste_config':                     '/etc/nova/api-paste.ini'
    'DEFAULT/rabbit_host':                          "%{hiera('cloud_controller')}"
    'DEFAULT/rabbit_userid':                        'nova'
    'DEFAULT/rabbit_password':                      'password'
    'DEFAULT/novncproxy_base_url':                  "http://%{hiera('cloud_controller')}:6080/vnc_auto.html"
    'DEFAULT/instance_usage_audit_period':          'hour'
    'DEFAULT/instance_usage_audit':                 true
    'DEFAULT/service_neutron_metadata_proxy':       true
    'DEFAULT/neutron_metadata_proxy_shared_secret': 'password'
    'DEFAULT/network_api_class':                    'nova.network.neutronv2.api.API'
    'DEFAULT/neutron_admin_username':               'neutron'
    'DEFAULT/neutron_admin_password':               'password'
    'DEFAULT/neutron_admin_auth_url':               "http://%{hiera('cloud_controller')}:35357/v2.0/"
    'DEFAULT/neutron_admin_tenant_name':            'services'
    'DEFAULT/neutron_url':                          "http://%{hiera('cloud_controller')}:9696/"
    'DEFAULT/libvirt_vif_driver':                   'nova.virt.libvirt.vif.LibvirtHybridOVSBridgeDriver'
    'DEFAULT/firewall_driver':                      'nova.virt.firewall.NoopFirewallDriver'
    'DEFAULT/security_group_api':                   'neutron'
    'DEFAULT/neutron_ovs_bridge':                   'br-int'
    'DEFAULT/neutron_region_name':                  'RegionOne'

neutron_settings:
  conf:
    'DEFAULT/debug':                        true
    'DEFAULT/verbose':                      true
    'DEFAULT/state_path':                   '/var/lib/neutron'
    'DEFAULT/lock_path':                    '$state_path/lock'
    'DEFAULT/core_plugin':                  'neutron.plugins.openvswitch.ovs_neutron_plugin.OVSNeutronPluginV2'
    'DEFAULT/rabbit_host':                  "%{hiera('cloud_controller')}"
    'DEFAULT/rabbit_password':              'password'
    'DEFAULT/rabbit_userid':                'nova'
    'DEFAULT/notification_driver':          'neutron.openstack.common.notifier.rpc_notifier'
    'agent/root_helper':                    'sudo /usr/bin/neutron-rootwrap /etc/neutron/rootwrap.conf'
    'keystone_authtoken/auth_host':         '127.0.0.1'
    'keystone_authtoken/auth_port':         '35357'
    'keystone_authtoken/auth_protocol':     'http'
    'keystone_authtoken/admin_tenant_name': 'services'
    'keystone_authtoken/admin_user':        'neutron'
    'keystone_authtoken/admin_password':    'password'
    'keystone_authtoken/signing_dir':       '$state_path/keystone-signing'
  ovs:
    'ovs/tenant_network_type':       'gre'
    'ovs/enable_tunneling':          true
    'ovs/tunnel_type':               'gre'
    'ovs/tunnel_id_ranges':          '1:1000'
    'ovs/local_ip':                  "%{::ipaddress_eth0}"
    'securitygroup/firewall_driver': 'neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver'
